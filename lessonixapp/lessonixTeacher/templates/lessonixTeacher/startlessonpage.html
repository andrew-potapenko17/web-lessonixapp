{% extends 'main.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static 'styles/startlessonpage.css' %}">
{% endblock %}

{% block content %}

<div id="start-lesson-page" class="container">
    <!-- Header -->
    <div id="header-div" class="header-container">
        <div class="header-left">
            <h1>Lesson Panel</h1>
        </div>
        <div class="header-right">
            <div id="day-date" class="flex-row">
                <div id="day"></div>
                <div id="date"></div>
            </div>
            <div id="current-time"></div>
        </div>
    </div>

    <!-- Main Flex Layout -->
    <div class="flex-container">

        <!-- Statistics Section -->
        <div id="today-statistics" class="statistics-container">
            <div class="statistic-label">
                <h1>Today's Statistics</h1>
            </div>
            <div class="stats-container">
                <div class="stat-item">
                    <h2 id="completed-lessons">{{ lessonscompleted }}</h2>
                    <p>Lessons completed</p>
                </div>
                <div class="stat-item">
                    <h2 id="checked-in-students">{{ studentschecked }}</h2>
                    <p>Students checked in</p>
                </div>
            </div>
        </div>

        <!-- Schedule Section -->
        <div id="schedule" class="schedule-container">
            <div class="schedule-label">
                <h1>Schedule</h1>
            </div>
            <div class="schedule-content">
                <p>Schedule unavailable</p>
            </div>
            <button id="start-lesson-btn" class="start-button" onclick="openModal()">Start Lesson</button>
        </div>

    </div>

    <!-- Start Lesson Modal -->
    <div id="slm" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeModal()">&times;</span>
                <h1>Start Lesson</h1>
            </div>
            <form method="post" action="{% url 'start_lesson_page' %}">
                {% csrf_token %}

                <!-- Class Selector -->
                <div class="list-container">
                    <label for="class">Class:
                        <img src="{% static 'img/plus-btn.png' %}" alt="Add Class" onclick="window.location.href='{% url 'schoolclasses' %}'">
                    </label>
                    <select name="class" id="class-select">
                        {% for class in user_classes %}
                            <option value="{{ class }}">{{ class }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Cabinet Selector -->
                <div class="list-container">
                    <label for="cabinet">Classroom:
                        <img src="{% static 'img/plus-btn.png' %}" alt="Add Classroom" onclick="window.location.href='{% url 'add_cabinet' %}'">
                    </label>
                    <select name="cabinet" id="cabinet-select">
                        {% for cabinet in user_cabs %}
                            <option value="{{ cabinet }}">{{ cabinet }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Subject Selector -->
                <div class="list-container">
                    <label for="subject">Subject:
                        <img src="{% static 'img/plus-btn.png' %}" alt="Add Subject" onclick="window.location.href='{% url 'add_subject' %}'">
                    </label>
                    <select name="subject" id="subject-select">
                        {% for subject in user_subjects %}
                            <option value="{{ subject }}">{{ subject }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="start-button">Start Lesson</button>
                </div>
            </form>
        </div>
    </div>

</div>

<!-- Scripts -->
<script src="{% static 'js/startlessonpage.js' %}"></script>
<script src="{% static 'js/startlessonpageTime.js' %}"></script>
<script src="{% static 'js/statstransition.js' %}"></script>

{% endblock content %}
